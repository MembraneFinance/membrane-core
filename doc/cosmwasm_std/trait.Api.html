<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Api are callbacks to system functions implemented outside of the wasm modules. Currently it just supports address conversion but we could add eg. crypto functions here."><meta name="keywords" content="rust, rustlang, rust-lang, Api"><title>Api in cosmwasm_std - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Regular.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../FiraSans-Medium.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Regular.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceSerif4-Bold.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../SourceCodePro-Semibold.ttf.woff2"><link rel="stylesheet" href="../normalize.css"><link rel="stylesheet" href="../rustdoc.css" id="mainThemeStyle"><link rel="stylesheet" href="../ayu.css" disabled><link rel="stylesheet" href="../dark.css" disabled><link rel="stylesheet" href="../light.css" id="themeStyle"><script id="default-settings" ></script><script src="../storage.js"></script><script defer src="sidebar-items.js"></script><script defer src="../main.js"></script><noscript><link rel="stylesheet" href="../noscript.css"></noscript><link rel="alternate icon" type="image/png" href="../favicon-16x16.png"><link rel="alternate icon" type="image/png" href="../favicon-32x32.png"><link rel="icon" type="image/svg+xml" href="../favicon.svg"></head><body class="rustdoc trait"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../cosmwasm_std/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../cosmwasm_std/index.html"><div class="logo-container"><img class="rust-logo" src="../rust-logo.svg" alt="logo"></div></a><h2 class="location"><a href="#">Api</a></h2><div class="sidebar-elems"><section><h3><a href="#required-methods">Required Methods</a></h3><ul class="block"><li><a href="#tymethod.addr_canonicalize">addr_canonicalize</a></li><li><a href="#tymethod.addr_humanize">addr_humanize</a></li><li><a href="#tymethod.addr_validate">addr_validate</a></li><li><a href="#tymethod.debug">debug</a></li><li><a href="#tymethod.ed25519_batch_verify">ed25519_batch_verify</a></li><li><a href="#tymethod.ed25519_verify">ed25519_verify</a></li><li><a href="#tymethod.secp256k1_recover_pubkey">secp256k1_recover_pubkey</a></li><li><a href="#tymethod.secp256k1_verify">secp256k1_verify</a></li></ul><h3><a href="#implementors">Implementors</a></h3></section><h2><a href="index.html">In cosmwasm_std</a></h2></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../wheel.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Trait <a href="index.html">cosmwasm_std</a>::<wbr><a class="trait" href="#">Api</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../clipboard.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../src/cosmwasm_std/traits.rs.html#71-142">source</a> · <a id="toggle-all-docs" href="javascript:void(0)" title="collapse all docs">[<span class="inner">&#x2212;</span>]</a></span></div><div class="item-decl"><pre class="rust trait"><code>pub trait Api {
    fn <a href="#tymethod.addr_validate" class="fnname">addr_validate</a>(&amp;self, human: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.str.html">str</a>) -&gt; <a class="type" href="type.StdResult.html" title="type cosmwasm_std::StdResult">StdResult</a>&lt;<a class="struct" href="struct.Addr.html" title="struct cosmwasm_std::Addr">Addr</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.addr_canonicalize" class="fnname">addr_canonicalize</a>(&amp;self, human: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.str.html">str</a>) -&gt; <a class="type" href="type.StdResult.html" title="type cosmwasm_std::StdResult">StdResult</a>&lt;<a class="struct" href="struct.CanonicalAddr.html" title="struct cosmwasm_std::CanonicalAddr">CanonicalAddr</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.addr_humanize" class="fnname">addr_humanize</a>(&amp;self, canonical: &amp;<a class="struct" href="struct.CanonicalAddr.html" title="struct cosmwasm_std::CanonicalAddr">CanonicalAddr</a>) -&gt; <a class="type" href="type.StdResult.html" title="type cosmwasm_std::StdResult">StdResult</a>&lt;<a class="struct" href="struct.Addr.html" title="struct cosmwasm_std::Addr">Addr</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.secp256k1_verify" class="fnname">secp256k1_verify</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message_hash: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signature: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public_key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.VerificationError.html" title="enum cosmwasm_std::VerificationError">VerificationError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.secp256k1_recover_pubkey" class="fnname">secp256k1_recover_pubkey</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message_hash: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signature: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;recovery_param: <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a><br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.66.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>&gt;, <a class="enum" href="enum.RecoverPubkeyError.html" title="enum cosmwasm_std::RecoverPubkeyError">RecoverPubkeyError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.ed25519_verify" class="fnname">ed25519_verify</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;message: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signature: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public_key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.VerificationError.html" title="enum cosmwasm_std::VerificationError">VerificationError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.ed25519_batch_verify" class="fnname">ed25519_batch_verify</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;messages: &amp;[&amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;signatures: &amp;[&amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]],<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public_keys: &amp;[&amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]]<br>&nbsp;&nbsp;&nbsp;&nbsp;) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.VerificationError.html" title="enum cosmwasm_std::VerificationError">VerificationError</a>&gt;;
<span class="item-spacer"></span>    fn <a href="#tymethod.debug" class="fnname">debug</a>(&amp;self, message: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.str.html">str</a>);
}</code></pre></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Api are callbacks to system functions implemented outside of the wasm modules.
Currently it just supports address conversion but we could add eg. crypto functions here.</p>
<p>This is a trait to allow mocks in the test code. Its members have a read-only
reference to the Api instance to allow accessing configuration.
Implementations must not have mutable state, such that an instance can freely
be copied and shared between threads without affecting the behaviour.
Given an Api instance, all members should return the same value when called with the same
arguments. In particular this means the result must not depend in the state of the chain.
If you need to access chaim state, you probably want to use the Querier.
Side effects (such as logging) are allowed.</p>
<p>We can use feature flags to opt-in to non-essential methods
for backwards compatibility in systems that don’t have them all.</p>
</div></details><h2 id="required-methods" class="small-section-header">Required Methods<a href="#required-methods" class="anchor"></a></h2><div class="methods"><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.addr_validate" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#95">source</a><h4 class="code-header">fn <a href="#tymethod.addr_validate" class="fnname">addr_validate</a>(&amp;self, human: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.str.html">str</a>) -&gt; <a class="type" href="type.StdResult.html" title="type cosmwasm_std::StdResult">StdResult</a>&lt;<a class="struct" href="struct.Addr.html" title="struct cosmwasm_std::Addr">Addr</a>&gt;</h4></section></summary><div class="docblock"><p>Takes a human readable address and validates if it is valid.
If it the validation succeeds, a <code>Addr</code> containing the same data as the input is returned.</p>
<p>This validation checks two things:</p>
<ol>
<li>The address is valid in the sense that it can be converted to a canonical representation by the backend.</li>
<li>The address is normalized, i.e. <code>humanize(canonicalize(input)) == input</code>.</li>
</ol>
<p>Check #2 is typically needed for upper/lower case representations of the same
address that are both valid according to #1. This way we ensure uniqueness
of the human readable address. Clients should perform the normalization before sending
the addresses to the CosmWasm stack. But please note that the definition of normalized
depends on the backend.</p>
<h6 id="examples"><a href="#examples">Examples</a></h6>
<div class="example-wrap"><pre class="rust rust-example-rendered"><code><span class="kw">let </span>input = <span class="string">&quot;what-users-provide&quot;</span>;
<span class="kw">let </span>validated: Addr = api.addr_validate(input).unwrap();
<span class="macro">assert_eq!</span>(validated, input);</code></pre></div>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.addr_canonicalize" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#103">source</a><h4 class="code-header">fn <a href="#tymethod.addr_canonicalize" class="fnname">addr_canonicalize</a>(&amp;self, human: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.str.html">str</a>) -&gt; <a class="type" href="type.StdResult.html" title="type cosmwasm_std::StdResult">StdResult</a>&lt;<a class="struct" href="struct.CanonicalAddr.html" title="struct cosmwasm_std::CanonicalAddr">CanonicalAddr</a>&gt;</h4></section></summary><div class="docblock"><p>Takes a human readable address and returns a canonical binary representation of it.
This can be used when a compact representation is needed.</p>
<p>Please note that the length of the resulting address is defined by the chain and
can vary from address to address. On Cosmos chains 20 and 32 bytes are typically used.
But that might change. So your contract should not make assumptions on the size.</p>
</div></details><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.addr_humanize" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#109">source</a><h4 class="code-header">fn <a href="#tymethod.addr_humanize" class="fnname">addr_humanize</a>(&amp;self, canonical: &amp;<a class="struct" href="struct.CanonicalAddr.html" title="struct cosmwasm_std::CanonicalAddr">CanonicalAddr</a>) -&gt; <a class="type" href="type.StdResult.html" title="type cosmwasm_std::StdResult">StdResult</a>&lt;<a class="struct" href="struct.Addr.html" title="struct cosmwasm_std::Addr">Addr</a>&gt;</h4></section></summary><div class="docblock"><p>Takes a canonical address and returns a human readble address.
This is the inverse of <a href="trait.Api.html#tymethod.addr_canonicalize"><code>addr_canonicalize</code></a>.</p>
</div></details><section id="tymethod.secp256k1_verify" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#111-116">source</a><h4 class="code-header">fn <a href="#tymethod.secp256k1_verify" class="fnname">secp256k1_verify</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;message_hash: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;signature: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;public_key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.VerificationError.html" title="enum cosmwasm_std::VerificationError">VerificationError</a>&gt;</h4></section><section id="tymethod.secp256k1_recover_pubkey" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#118-123">source</a><h4 class="code-header">fn <a href="#tymethod.secp256k1_recover_pubkey" class="fnname">secp256k1_recover_pubkey</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;message_hash: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;signature: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;recovery_param: <a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a><br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="struct" href="https://doc.rust-lang.org/1.66.0/alloc/vec/struct.Vec.html" title="struct alloc::vec::Vec">Vec</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>&gt;, <a class="enum" href="enum.RecoverPubkeyError.html" title="enum cosmwasm_std::RecoverPubkeyError">RecoverPubkeyError</a>&gt;</h4></section><section id="tymethod.ed25519_verify" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#125-130">source</a><h4 class="code-header">fn <a href="#tymethod.ed25519_verify" class="fnname">ed25519_verify</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;message: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;signature: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>],<br>&nbsp;&nbsp;&nbsp;&nbsp;public_key: &amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.VerificationError.html" title="enum cosmwasm_std::VerificationError">VerificationError</a>&gt;</h4></section><section id="tymethod.ed25519_batch_verify" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#132-137">source</a><h4 class="code-header">fn <a href="#tymethod.ed25519_batch_verify" class="fnname">ed25519_batch_verify</a>(<br>&nbsp;&nbsp;&nbsp;&nbsp;&amp;self,<br>&nbsp;&nbsp;&nbsp;&nbsp;messages: &amp;[&amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]],<br>&nbsp;&nbsp;&nbsp;&nbsp;signatures: &amp;[&amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]],<br>&nbsp;&nbsp;&nbsp;&nbsp;public_keys: &amp;[&amp;[<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.u8.html">u8</a>]]<br>) -&gt; <a class="enum" href="https://doc.rust-lang.org/1.66.0/core/result/enum.Result.html" title="enum core::result::Result">Result</a>&lt;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.bool.html">bool</a>, <a class="enum" href="enum.VerificationError.html" title="enum cosmwasm_std::VerificationError">VerificationError</a>&gt;</h4></section><details class="rustdoc-toggle method-toggle" open><summary><section id="tymethod.debug" class="method has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/traits.rs.html#141">source</a><h4 class="code-header">fn <a href="#tymethod.debug" class="fnname">debug</a>(&amp;self, message: &amp;<a class="primitive" href="https://doc.rust-lang.org/1.66.0/std/primitive.str.html">str</a>)</h4></section></summary><div class="docblock"><p>Emits a debugging message that is handled depending on the environment (typically printed to console or ignored).
Those messages are not persisted to chain.</p>
</div></details></div><h2 id="implementors" class="small-section-header">Implementors<a href="#implementors" class="anchor"></a></h2><div id="implementors-list"><section id="impl-Api-for-MockApi" class="impl has-srclink"><a class="srclink rightside" href="../src/cosmwasm_std/testing/mock.rs.html#104-220">source</a><a href="#impl-Api-for-MockApi" class="anchor"></a><h3 class="code-header">impl <a class="trait" href="trait.Api.html" title="trait cosmwasm_std::Api">Api</a> for <a class="struct" href="testing/struct.MockApi.html" title="struct cosmwasm_std::testing::MockApi">MockApi</a></h3></section></div><script src="../implementors/cosmwasm_std/traits/trait.Api.js" async></script></section></div></main><div id="rustdoc-vars" data-root-path="../" data-current-crate="cosmwasm_std" data-themes="ayu,dark,light" data-resource-suffix="" data-rustdoc-version="1.66.0 (69f9c33d7 2022-12-12)" ></div></body></html>